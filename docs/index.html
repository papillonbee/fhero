<html lang="en" class=""><head><script src="//static.codepen.io/assets/editor/live/console_runner-ce3034e6bde3912cc25f83cccb7caa2b0f976196f2f2d52303a462c826d54a73.js"></script><script src="//static.codepen.io/assets/editor/live/css_live_reload_init-890dc39bb89183d4642d58b1ae5376a0193342f9aed88ea04330dc14c8d52f55.js"></script><meta charset="UTF-8"><meta name="robots" content="noindex"><link rel="shortcut icon" type="image/x-icon" href="//static.codepen.io/assets/favicon/favicon-8ea04875e70c4b0bb41da869e81236e54394d63638a1ef12fa558a4a835f1164.ico"><link rel="mask-icon" type="" href="//static.codepen.io/assets/favicon/logo-pin-f2d2b6d2c61838f7e76325261b7195c27224080bc099486ddd6dccb469b8e8e6.svg" color="#111"><link rel="canonical" href="https://codepen.io/ppllnb/pen/pVwJmy?editors=1111">
<meta name="viewport" content="width=device-width, initial-scale=1">

<style class="cp-pen-styles">* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
    Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
}

body {
  min-height: 1280px;
  font-weight: 300;
  color: #2a2a2a;
}

svg,
h1,
h2,
h3,
h4,
a {
  margin: 0;
  font-weight: 300;
}

a,
a:visited,
a:hover {
  color: #f30;
  text-decoration: none;
  border-bottom: 1px solid currentColor;
}

#intro {
  max-width: 40rem;
  margin: 1rem auto;
  text-align: center;
}

.intro__overline {
  font-size: 1.4rem;
}

.intro__hed {
  font-size: 1.4rem;
  margin: 1.5rem auto;
  text-transform: uppercase;
  font-weight: 900;
  letter-spacing: 0.05em;
}

.intro__dek {
  font-size: 1.4rem;
}

/* demo */

#intro {
  margin-bottom: 320px;
}

#outro {
  height: 640px;
}

/* scrollama */

#scroll {
  position: relative;
  border-top: 1px dashed #000;
  border-bottom: 1px dashed #000;
}

.scroll__graphic {
  position: absolute;
  top: 0;
  left: 0;
  bottom: auto;
  background-color: #fff;
  -webkit-transform: translate3d(0, 0, 0);
  -moz-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
}

.scroll__graphic.is-fixed {
  position: fixed;
}

.scroll__graphic.is-bottom {
  bottom: 0;
  top: auto;
}

.chart {
  position: absolute;
  right: 1rem;
  top: 50%;
  -moz-transform: translateY(-50%);
  -webkit-transform: translateY(-50%);
  transform: translateY(-50%);
  /*background-color: #ddd;*/
  /*border: 1px solid #000;*/
}

.chart svg {
  text-align: center;
  padding: 1rem;
  position: absolute;
  top: 50%;
  left: 50%;
  -moz-transform: translate(-50%, -50%);
  -webkit-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
  font-size: 8rem;
  font-weight: 900;
  color: #666;
}

.scroll__text {
  position: relative;
  padding: 0 1rem;
  max-width: 30rem;
  width: 33%;
}

.step {
  margin: 2rem auto;
  border: 1px solid #333;
}

.step.is-active {
  background-color: lightgoldenrodyellow;
}

.step p {
  text-align: center;
  padding: 1rem;
  font-size: 1.5rem;
}
.node {
  font: 300 9px "Helvetica Neue", Helvetica, Arial, sans-serif;
  fill: #bbb;
}

.node:hover {
  fill: #000;
}

.link {
  stroke: steelblue;
  stroke-opacity: 0.4;
  fill: none;
  pointer-events: none;
}

.node:hover,
.node--source,
.node--target {
  font-weight: 700;
}

.node--source {
  fill: #2ca02c;
}

.node--target {
  fill: #d62728;
}

.link--source,
.link--target {
  stroke-opacity: 1;
  stroke-width: 2px;
}

.link--source {
  stroke: #d62728;
}

.link--target {
  stroke: #2ca02c;
}
div.tooltip {	
    position: absolute;			
    text-align: center;			
    width: auto;					
    height: auto;					
    padding: 2px;				
    font: 22px sans-serif;		
    background: rgba(0, 100, 100, .4);	
    border: 0px;		
    border-radius: 8px;			
    pointer-events: none;			
}
.blink {
	-webkit-animation: blink .75s linear infinite;
	-moz-animation: blink .75s linear infinite;
	-ms-animation: blink .75s linear infinite;
	-o-animation: blink .75s linear infinite;
	 animation: blink .75s linear infinite;
}
@-webkit-keyframes blink {
	0% { opacity: 1; }
	50% { opacity: 1; }
	50.01% { opacity: 0; }
	100% { opacity: 0; }
}
@-moz-keyframes blink {
	0% { opacity: 1; }
	50% { opacity: 1; }
	50.01% { opacity: 0; }
	100% { opacity: 0; }
}
@-ms-keyframes blink {
	0% { opacity: 1; }
	50% { opacity: 1; }
	50.01% { opacity: 0; }
	100% { opacity: 0; }
}
@-o-keyframes blink {
	0% { opacity: 1; }
	50% { opacity: 1; }
	50.01% { opacity: 0; }
	100% { opacity: 0; }
}
@keyframes blink {
	0% { opacity: 1; }
	50% { opacity: 1; }
	50.01% { opacity: 0; }
	100% { opacity: 0; }
}</style></head><body>
<script language="JavaScript">
function showDate()
{
	var now = new Date();
	var days = new Array('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday');
	var months = new Array('January','February','March','April','May','June','July','August','September','October','November','December');
	var date = ((now.getDate()<10) ? "0" : "")+ now.getDate();
	function fourdigits(number)
	{
		return (number < 1000) ? number + 1900 : number;
	}

tnow=new Date();
thour=now.getHours();
tmin=now.getMinutes();
tsec=now.getSeconds();

if (tmin<=9) { tmin="0"+tmin; }
if (tsec<=9) { tsec="0"+tsec; }
if (thour<10) { thour="0"+thour; }

today = "Hello on " + days[now.getDay()] + ", " + date + " " + months[now.getMonth()] + ", " + (fourdigits(now.getYear() + 543)) + " - " + thour + ":" + tmin +":"+ tsec;
document.getElementById("dateDiv").innerHTML = today;
}
setInterval("showDate()", 1000);
</script>
<section id="intro">
  <div id="dateDiv">Loading<!--Hello on Thursday, 03 May, 2561 - 15:18:24--></div>
  <p>We proudly present you</p>
  <p class="intro__overline">
    <!--<a href='https://github.com/russellgoldenberg/scrollama'>scrollama.js</a>-->
  </p>
  <h1 class="intro__hed">THAILAND'S SOCIAL & POLITICAL EVENTS FROM FHERO</h1>
  <p>Scroll down to see more</p>
  <!--<p>
    by Papan Yongmalwong
  </p>
  <p class='intro__dek'>
    Scroll down to explore
  </p>-->
  <p class="blink">
    ▽
    <br>
    ▽
    <br>
  </p>
<br>
<br>
</section>
<section id="scroll">
  <div class="scroll__graphic">
    <div id="container" class="chart"></div>
  </div>
  <div class="scroll__text">
    <div class='step' data-step='1'>
      <p>
        YEAR 2545
      </p>
    </div>
    <div class='step' data-step='2'>
      <p>YEAR 2546</p>
    </div>
    <div class='step' data-step='3'>
      <p>YEAR 2547</p>
    </div>
    <div class='step' data-step='4'>
      <p>YEAR 2548</p>
    </div>
    <div class='step' data-step='5'>
      <p>YEAR 2549</br>
    <ul>
      <li><a href="https://en.wikipedia.org/wiki/2006_Thai_coup_d%27%C3%A9tat">2006 Thai coup d'état</a>
      </br>
    <a href="https://th.wikipedia.org/wiki/%E0%B8%A3%E0%B8%B1%E0%B8%90%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B8%AB%E0%B8%B2%E0%B8%A3%E0%B9%83%E0%B8%99%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B9%80%E0%B8%97%E0%B8%A8%E0%B9%84%E0%B8%97%E0%B8%A2_%E0%B8%9E.%E0%B8%A8._2549">รัฐประหารในประเทศไทย พ.ศ. 2549</a></li>
    </ul></p>
    </div>
    <div class='step' data-step='6'>
      <p>YEAR 2550</p>
    </div>
    <div class='step' data-step='7'>
      <p>YEAR 2551</p>
    </div>
    <div class='step' data-step='8'>
      <p>YEAR 2552</br>
    <ul>
      <li><a href="https://en.wikipedia.org/wiki/South_Thailand_insurgency">South Thailand insurgency</a>
      </br>
    <a href="https://th.wikipedia.org/wiki/%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B9%84%E0%B8%A1%E0%B9%88%E0%B8%AA%E0%B8%87%E0%B8%9A%E0%B9%83%E0%B8%99%E0%B8%8A%E0%B8%B2%E0%B8%A2%E0%B9%81%E0%B8%94%E0%B8%99%E0%B8%A0%E0%B8%B2%E0%B8%84%E0%B9%83%E0%B8%95%E0%B9%89%E0%B8%82%E0%B8%AD%E0%B8%87%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B9%80%E0%B8%97%E0%B8%A8%E0%B9%84%E0%B8%97%E0%B8%A2">ความไม่สงบในชายแดนภาคใต้ของประเทศไทย</a></li>
    </ul></p>
    </div>
    <div class='step' data-step='9'>
      <p>YEAR 2553</br>
    <ul>
      <li><a href="https://en.wikipedia.org/wiki/2010_Thai_political_protests">2010 Thai political protests</a>
      </br>
    <a href="https://th.wikipedia.org/wiki/%E0%B8%81%E0%B8%B2%E0%B8%A3%E0%B8%AA%E0%B8%A5%E0%B8%B2%E0%B8%A2%E0%B8%81%E0%B8%B2%E0%B8%A3%E0%B8%8A%E0%B8%B8%E0%B8%A1%E0%B8%99%E0%B8%B8%E0%B8%A1%E0%B8%97%E0%B8%B5%E0%B9%88%E0%B9%81%E0%B8%A2%E0%B8%81%E0%B8%A3%E0%B8%B2%E0%B8%8A%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B8%AA%E0%B8%87%E0%B8%84%E0%B9%8C_%E0%B8%9E.%E0%B8%A8._2553">การสลายการชุมนุมที่แยกราชประสงค์ พ.ศ. 2553</a></li>
    </ul></p>
    </div>
    <div class='step' data-step='10'>
      <p>YEAR 2554</br>
    <ul>
      <li><a href="https://www.theatlantic.com/photo/2011/10/worst-flooding-in-decades-swamps-thailand/100168/">Worst Flooding in Decades Swamps Thailand</a>
      </br>
    <a href="https://www.thairath.co.th/content/463577">น้ำท่วมใหญ่ปี 54 ฤทธิ์ 'น้องน้ำ' ทำคนไทยจำฝังใจ เพราะ 'เอาไม่อยู่'</a></li>
    </ul></p>
    </div>
    <div class='step' data-step='11'>
      <p>YEAR 2555</p>
    </div>
    <div class='step' data-step='12'>
      <p>YEAR 2556</br>
    <ul>
      <li><a href="https://en.wikipedia.org/wiki/2013%E2%80%932014_Thai_political_crisis">2013–2014 Thai political crisis</a>
      </br>
    <a href="https://th.wikipedia.org/wiki/%E0%B8%A7%E0%B8%B4%E0%B8%81%E0%B8%A4%E0%B8%95%E0%B8%81%E0%B8%B2%E0%B8%A3%E0%B8%93%E0%B9%8C%E0%B8%81%E0%B8%B2%E0%B8%A3%E0%B9%80%E0%B8%A1%E0%B8%B7%E0%B8%AD%E0%B8%87%E0%B9%84%E0%B8%97%E0%B8%A2_%E0%B8%9E.%E0%B8%A8._2556%E2%80%932557">วิกฤตการณ์การเมืองไทย พ.ศ. 2556–2557</a></li>
    </ul></p>
    </div>
    <div class='step' data-step='13'>
      <p>YEAR 2557</br>
    <ul>
      <li>Thailand had executed an Animal Protection Act for the first time in 2014
      </br>
    <a href="https://www.thairath.co.th/content/467700">พ.ร.บ.คุ้มครองสัตว์ คลอดแล้วเพื่อสัตว์</a> (<a href="http://web.krisdika.go.th/data/law/law2/%BB53/%BB53-20-2557-a0001.htm">พระราชบัญญัติป้องกันการทารุณกรรมและการจัดสวัสดิภาพสัตว์ พ.ศ. ๒๕๕๗</a>)</li>
    </ul></p>
    </div>
    <div class='step' data-step='14'>
      <p>YEAR 2558</br>
    <ul>
      <li>FHERO wrote a song for K-POP fans in Thailand
      </br>
    <a href="https://twitter.com/Fucking_Hero/status/650146844568190976">"ฉันก็เป็น ติ่งเกาหลีคนหนึ่ง"</a></li>
    </ul></p>
    </div>
    <div class='step' data-step='15'>
      <p>YEAR 2559</br>
    <ul>
      <li><a href="http://www.bbc.com/news/world-asia-37643326">Thailand's King Bhumibol Adulyadej dead at 88</a>
      </br>
    <a href="http://www.bbc.co.uk/news/resources/idt-sh/king_bhumibol_thai">หนึ่งปีแห่งความอาดูร</a></li>
    </ul></p>
    </div>
    <div class='step' data-step='16'>
      <p>YEAR 2560</p>
    </div>
    <div class='step' data-step='17'>
      <p>YEAR 2561</p>
    </div>
    <div class='step' data-step='18'>
      <p>FROM YEAR 2545 TO YEAR 2561</p>
    </div>
  </div>
</section>
<section id="outro"></section>
<div class="debug"></div>
<p style="text-align:center;">Thank you for visiting and see you next time!</p>
<p style="text-align:center;"><a href="https://www.facebook.com/PapillonBee">Papan Yongmalwong</a></br><a href="https://www.facebook.com/ChaLeNNiNE.SaKuiLenTe">Kulrisa Phatchariyapaparrach</a></br><a href="https://www.facebook.com/phiraya.punyana">Phiraya Punyana</a></br><a href="https://www.facebook.com/sattipat">Sithipath Yooprong</a></p>
<script src="//static.codepen.io/assets/common/stopExecutionOnTimeout-b2a7b3fe212eaa732349046d8416e00a9dec26eb7fd347590fbced3ab38af52e.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.5.0/d3.min.js"></script><script src="https://unpkg.com/scrollama@0.6.1/build/scrollama.js"></script>
<script>// using d3 for convenience
var container = d3.select("#scroll");
var graphic = container.select(".scroll__graphic");
var chart = graphic.select(".chart");
var text = container.select(".scroll__text");
var step = text.selectAll(".step");

var div = d3.select("body").append("div").attr("class", "tooltip").style("opacity", 0);

var diameter = 1152;
    radius = diameter / 2,
    innerRadius = radius - 350;

var cluster = d3.cluster().size([360, innerRadius]);

var line = d3.radialLine().curve(d3.curveBundle.beta(0.85)).radius(function (d) {
  return d.y;
}).angle(function (d) {
  return d.x / 180 * Math.PI;
});

var svg = d3.select("div#container")
  .append("svg")
  .attr("preserveAspectRatio", "xMinYMin meet")
  .attr("viewBox", "-576 -576 1152 1152");

svg.append("g").attr("transform", "translate(" + radius + "," + radius + ")");
	
var link = svg.append("g").selectAll(".link"),
    node = svg.append("g").selectAll(".node");

var data;
d3.json("https://gist.githubusercontent.com/papillonbee/1ef1c7b696112ea1d08bb32de9a6a2c7/raw/23a85e5aee94c45f171e13d9e766d73a2cc6b1be/Book2.json", function (error, classes) {
  if (error) throw error;

  /*classes = classes.filter(function(d, i){
    if(d.name.substr(0, d.name.lastIndexOf(".")) === '2545'){
      return d;
    }
    if(d.name.substr(0, d.name.lastIndexOf(".")) === 'x'){
      return d;
    }
    if(d.name.substr(0, d.name.lastIndexOf(".")) === 'y'){
      return d;
    }
    if(d.name.substr(0, d.name.lastIndexOf(".")) === 'z'){
      return d;
    }
  })
  console.log(classes);*/
  //console.log(classes[0].name.substr(0, (classes[0].name.lastIndexOf("."))));
  data = classes;
  var root = packageHierarchy(classes).sum(function (d) {
    return d.size;
  });

  cluster(root);

  link = link.data(packageImports(root.leaves())).enter().append("path").each(function (d) {
    d.source = d[0], d.target = d[d.length - 1];
  }).attr("class", "link").attr("d", line);

  node = node.data(root.leaves()).enter()
	.append("a")
      	.attr("class", "node")
      	.attr("dy", "0.31em")
      	.attr("xlink:href", function(d){
      if(d.data.url === ""){
	
      }
      else{
	return d.data.url;
      }
  })
	.append("text").attr("class", "node").attr("dy", "0.31em").attr("transform", function (d) {
    return "rotate(" + (d.x - 90) + ")translate(" + (d.y + 8) + ",0)" + (d.x < 180 ? "" : "rotate(180)");
  }).attr("text-anchor", function (d) {
    return d.x < 180 ? "start" : "end";
  }).text(function (d) {
    return d.data.key;
  }).on("mouseover", mouseovered).on("mouseout", mouseouted);
});

function mouseovered(d) {
  node.each(function (n) {
    n.target = n.source = false;
  });

  link.classed("link--target", function (l) {
    if (l.target === d) return l.source.source = true;
  }).classed("link--source", function (l) {
    if (l.source === d) return l.target.target = true;
  }).filter(function (l) {
    return l.target === d || l.source === d;
  }).raise();

  node.classed("node--target", function (n) {
    return n.target;
  }).classed("node--source", function (n) {
    return n.source;
  });
  div.transition().duration(200).style("opacity", .9);
  div.html(d.data.key + "<br/>").style("left", d3.event.pageX + "px").style("top", d3.event.pageY - 28 + "px");
}

function mouseouted(d) {
  link.classed("link--target", false).classed("link--source", false);

  node.classed("node--target", false).classed("node--source", false);
  div.transition().duration(500).style("opacity", 0);
}

// Lazily construct the package hierarchy from class names.
function packageHierarchy(classes) {
  var map = {};

  function find(name, data) {
    var node = map[name],
        i;
    if (!node) {
      node = map[name] = data || { name: name, children: [] };
      if (name.length) {
        node.parent = find(name.substring(0, i = name.lastIndexOf(".")));
        node.parent.children.push(node);
        node.key = name.substring(i + 1);
      }
    }
    return node;
  }

  classes.forEach(function (d) {
    find(d.name, d);
  });

  return d3.hierarchy(map[""]);
}

// Return a list of imports for the given array of nodes.
function packageImports(nodes) {
  var map = {},
      imports = [];

  // Compute a map from name to node.
  nodes.forEach(function (d) {
    map[d.data.name] = d;
  });

  // For each import, construct a link from the source to target node.
  nodes.forEach(function (d) {
    if (d.data.imports) d.data.imports.forEach(function (i) {
      imports.push(map[d.data.name].path(map[i]));
    });
  });

  return imports;
}
	
// initialize the scrollama
var scroller = scrollama();

// generic window resize listener event
function handleResize() {
  // 1. update height of step elements
  var stepHeight = Math.floor(window.innerHeight * 0.75);
  step.style("height", stepHeight + "px");

  // 2. update width/height of graphic element
  var bodyWidth = d3.select("body").node().offsetWidth;

  graphic.style("width", bodyWidth + "px").style("height", window.innerHeight + "px");

  var chartMargin = 32;
  var textWidth = text.node().offsetWidth;
  var chartWidth = graphic.node().offsetWidth - textWidth - chartMargin;

  chart.style("width", chartWidth + "px").style("height", Math.floor(window.innerHeight / 2) + "px");

  // 3. tell scrollama to update new element dimensions
  scroller.resize();
}

// scrollama event handlers
function handleStepEnter(response) {
  // response = { element, direction, index }

  // add color to current step only
  step.classed("is-active", function (d, i) {
    return i === response.index;
  });

  // update graphic based on step
  //chart.select("p").text(response.index + 1);
  update(response.index + 2545);
  //console.log(response.index + 2545);
}

function handleContainerEnter(response) {
  // response = { direction }

  // sticky the graphic (old school)
  graphic.classed("is-fixed", true);
  graphic.classed("is-bottom", false);
}

function handleContainerExit(response) {
  // response = { direction }

  // un-sticky the graphic, and pin to top/bottom of container
  graphic.classed("is-fixed", false);
  graphic.classed("is-bottom", response.direction === "down");
}

function init() {
  // 1. force a resize on load to ensure proper dimensions are sent to scrollama
  handleResize();

  // 2. setup the scroller passing options
  // this will also initialize trigger observations
  // 3. bind scrollama event handlers (this can be chained like below)
  scroller.setup({
    container: "#scroll",
    graphic: ".scroll__graphic",
    text: ".scroll__text",
    step: ".scroll__text .step",
    debug: false
  }).onStepEnter(handleStepEnter).onContainerEnter(handleContainerEnter).onContainerExit(handleContainerExit);

  // setup resize event
  window.addEventListener("resize", handleResize);
}

// kick things off
init();

function update(year) {
  classes = data.filter(function (d, i) {
    if (year === 2562) {
      return d;
    }
    if (parseInt(d.name.substr(0, d.name.lastIndexOf("."))) === year) {
      return d;
    }
    if (d.name.substr(0, d.name.lastIndexOf(".")) === 'x') {
      return d;
    }
    if (d.name.substr(0, d.name.lastIndexOf(".")) === 'y') {
      return d;
    }
    if (d.name.substr(0, d.name.lastIndexOf(".")) === 'z') {
      return d;
    }
  });

  //console.log(classes[0]);
  var root = packageHierarchy(classes).sum(function (d) {
    return d.size;
  });

  cluster(root);
  //console.log(root.leaves()[0].data.key)
  var x = packageImports(root.leaves());
  //console.log(packageImports(root.leaves())[0][0].data.key);
  
 var arr = [], arr2 = [];
  for(var i = 0; i < x.length; i++){
    arr.push(x[i][0].data.key);
    arr2.push(x[i][x[i].length - 1].data.key);
  }

  link.style("stroke-opacity", 0.4);

  link.filter(function (d) {
    if (arr.includes(d[0].data.key) & arr2.includes(d[d.length - 1].data.key)) {
      //console.log(d[0].data.key);
      //return d;
    } else {
      return d;
    }
    //console.log(d[d.length - 1].data.key);
  }).style("stroke-opacity", 0);

}
//# sourceURL=pen.js
</script><div class="tooltip"></div>
</body></html>
